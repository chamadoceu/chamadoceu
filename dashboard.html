<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Sistema de Gest√£o - Chama do C√©u</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/jpeg" href="https://i.imgur.com/Xy828hk.jpeg">
</head>
<body>
  <div class="topbar">
    <div class="brand"><img class="logo" src="https://i.imgur.com/Xy828hk.jpeg" alt="Logo"> Sistema de Gest√£o - Chama do C√©u </div>
    <div id="dash-actions" >
      <button id="btn-toggle-vals" class="btn ghost">üëÅ Exibir Valores</button>
	  <button id="btn-logout" class="btn ghost">üö™ Sair</button>
    </div>
  </div>

  <div class="layout">
    <aside class="sidebar">
      <div class="menu">
        <h4>Menu</h4>
        <button class="nav-btn active" data-target="screen-dashboard">Dashboard</button>
        <button class="nav-btn" data-target="screen-insumos">Insumos</button>
        <button class="nav-btn" data-target="screen-receitas">Receitas</button>
        <button class="nav-btn" data-target="screen-producao">Produ√ß√£o</button>
        <button class="nav-btn" data-target="screen-estoque">Estoque</button>
        <button class="nav-btn" data-target="screen-vendas">Vendas</button>
        <button class="nav-btn" data-target="screen-revendedores">Revendedores</button>
        <button class="nav-btn" data-target="screen-config">Configura√ß√µes</button>
      </div>
    </aside>

    <main class="content">
      <!-- ===== DASHBOARD ===== -->
      <section id="screen-dashboard" class="screen active">
        <div class="panel">
          <div class="panel-header">
            <span>Dashboard</span>
                      </div>
          <div class="panel-body" edit-form>
            <div class="kpi-grid">
              <div class="kpi fat"><div>Faturamento</div><div class="value val-field" id="kpi-fat">‚Ä¢‚Ä¢‚Ä¢</div></div>
              <div class="kpi lucro"><div>Lucro</div><div class="value val-field" id="kpi-lucro">‚Ä¢‚Ä¢‚Ä¢</div></div>
              <div class="kpi markup"><div>Markup M√©dio</div><div class="value val-field" id="kpi-markup">‚Ä¢‚Ä¢‚Ä¢</div></div>
              <div class="kpi vendas"><div>Total Vendas</div><div class="value val-field" id="kpi-vendas">‚Ä¢‚Ä¢‚Ä¢</div></div>
            </div>
          </div>
        </div>

        <div class="charts-row">
          <div class="chart-card">
            <div class="panel-header">Insumos mais usados</div>
            <div class="chart-wrap"><canvas id="chart-insumos"></canvas></div>
          </div>
          <div class="chart-card">
            <div class="panel-header">Maiores Estoques (Produtos)</div>
            <div class="chart-wrap"><canvas id="chart-estoque"></canvas></div>
          </div>
          <div class="chart-card">
            <div class="panel-header">Distribui√ß√£o de Vendas por Produto</div>
            <div class="chart-wrap"><canvas id="chart-vendas"></canvas></div>
          </div>
        </div>

        <div class="panel" >
          <div class="panel-header">√öltimas Vendas</div>
          <div class="panel-body" edit-form>
            <table><thead><tr><th>Data</th><th>Produto</th><th>Qtd</th><th>Venda</th><th>Lucro</th></tr></thead><tbody id="dash-ult-vendas"></tbody></table>
          </div>
        </div>
      </section>

      <!-- ===== INSUMOS ===== -->
      <section id="screen-insumos" class="screen">
        <div class="panel">
          <div class="panel-header">Cadastrar Insumo</div>
          <div class="panel-body" edit-form>
            <div class="row">
              <div class="field">
                <label>Nome *</label>
                <input id="ins-nome" placeholder="Ex.: Parafina, Ess√™ncia de Lavanda">
              </div>
              <div class="field">
                <label>Unidade *</label>
                <select id="ins-un">
                  <option value="">Selecione...</option>
                  <option value="g">g</option>
                  <option value="ml">ml</option>
                  <option value="un">un</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="field">
                <label>Data da Compra *</label>
                <input type="date" id="ins-data">
              </div>
            </div>
            <div class="row">
              <div class="field">
                <label>Quantidade Total *</label>
                <input id="ins-qtd" placeholder="Ex.: 1000">
              </div>
              <div class="field">
                <label>Custo Total (R$) *</label>
                <input id="ins-custo" placeholder="Ex.: 120,00">
              </div>
            </div>
            <div class="actions">
              <button id="btn-ins-salvar" class="btn primary">Salvar</button>
	      <button id="btn-ins-cancelar" class="btn ghost hide" >Cancelar</button>
              <button id="btn-reset-insumo" class="btn ghost">Limpar</button>
            </div>
            <input type="hidden" id="insumo-edit-id">
            </div>
        </div>
        <div class="panel">
          <div class="panel-header">Lista de Insumos</div>
          <div class="panel-body" edit-form>
            <table>
              <thead>
                <tr>
                  <th>Nome</th><th>Unidade</th><th>Qtd</th><th>√öltimo Custo</th><th>Custo M√©dio</th><th>Custo/Un</th><th class="right">A√ß√µes</th>
                </tr>
              </thead>
              <tbody id="insumos-tbody"></tbody>
            </table>
            <div id="insumos-empty" class="empty" >Nenhum insumo cadastrado.</div>
          </div>
        </div>
      <div class="panel">
  <div class="panel-header">Hist√≥rico de Compras de Insumos</div>
  <div class="panel-body" edit-form>
    <table>
      <thead><tr><th>Data</th><th>Insumo</th><th>Unidade</th><th>Qtd</th><th>Custo</th><th>Custo/Un</th></tr></thead>
      <tbody id="tb-hist-compras"></tbody>
    </table>
  </div>
</div>
</section>

      <!-- ===== RECEITAS ===== -->
      
<section id="screen-receitas" class="screen">
  <div class="panel">
    <div class="panel-header">Cadastro de Receitas</div>
    <div class="panel-body" edit-form>
      <div class="grid cols-2">
        <div class="field"><label>Nome da Receita</label><input id="rec-nome" placeholder="Ex.: Vela Lavanda 200g"></div>
        <div class="field"><label>Rendimento (unid por receita)</label><input id="rec-rend" placeholder="Ex.: 1"></div>
      </div>
      <div class="grid cols-3" >
        <div class="field"><label>Insumo</label><select id="rcp-ins"></select></div>
        <div class="field"><label>Quantidade (por receita)</label><input id="rcp-ins-qtd" placeholder="Ex.: 0,2"></div>
        <div class="field"><label>&nbsp;</label><button id="btn-add-insumo-receita" class="btn">Adicionar</button></div>
      </div>
      <div >
        <table>
          <thead><tr><th>Insumo</th><th>Qtd</th><th>Custo M√©dio Atual</th><th>A√ß√µes</th></tr></thead>
          <tbody id="tb-rcp-itens"></tbody>
        </table>
      </div>
      <div class="actions" >
        <button id="btn-rcp-salvar" class="btn primary">Salvar Receita</button>
        <button id="btn-rcp-cancelar" class="btn ghost" >Cancelar Edi√ß√£o</button>
      </div>
    </div>
  </div>
  <div class="panel">
    <div class="panel-header">Receitas Cadastradas</div>
    <div class="panel-body" edit-form>
      <table>
        <thead>
          <tr>
            <th>Receita</th><th>Rendimento</th><th>Custo Unit√°rio Estimado</th><th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="tb-receitas"></tbody>
      </table>
    </div>
  </div>
</section>


      <!-- ===== PRODU√á√ÉO ===== -->
      <section id="screen-producao" class="screen">
        <div class="panel">
          <div class="panel-header">Produ√ß√£o (Consome Insumos e Cria Produtos)</div>
          <div class="panel-body" edit-form>
            <div class="grid cols-3">
<div class="field"><label>Receita</label><select id="prod-receita"></select></div>
              <div class="field"><label>Quantidade a Produzir (unid)</label><input id="prod-qtd" placeholder="Ex.: 10"></div>
              <div class="field"><label>Data da Produ√ß√£o</label><input type="date" id="prod-data"></div>
              <div class="field"><label>&nbsp;</label><button id="btn-produzir" class="btn primary">Produzir</button></div>
            </div>
            <div ><span class="tag">Obs.: custo unit√°rio do produto usa custo M√âDIO atual dos insumos.</span></div>
          </div>
        </div>
        <div class="panel">
          <div class="panel-header">Hist√≥rico de Produ√ß√£o</div>
          <div class="panel-body" edit-form>
            <table><thead><tr><th>Data</th><th>Receita</th><th>Qtd</th><th>Custo Total</th></tr></thead><tbody id="tb-hist-prod"></tbody></table>
          </div>
        </div>
      </section>

      <!-- ===== ESTOQUE ===== -->
      <section id="screen-estoque" class="screen">
        <div class="panel">
          <div class="panel-header">Estoque de Produtos</div>
          <div class="panel-body" edit-form>
            <table><thead><tr><th>Produto</th><th>Qtd</th><th>Custo Unit (m√©dio da receita)</th></tr></thead><tbody id="tb-prod-estoque"></tbody></table>
          </div>
        </div>
        <div class="panel">
          <div class="panel-header">Estoque de Insumos</div>
          <div class="panel-body" edit-form>
            <table><thead><tr><th>Insumo</th><th>Unid</th><th>Qtd</th><th>Custo/Un</th></tr></thead><tbody id="tb-ins-estoque"></tbody></table>
          </div>
        </div>
      
  <div class="panel">
    <div class="panel-header">Estoque por Revendedor</div>
    <div class="panel-body" edit-form>
      <table><thead><tr><th>Revendedor</th><th>Produto</th><th>Qtd</th></tr></thead><tbody id="tb-rev-estoque"></tbody></table>
    </div>
  </div>

</section>

      <!-- ===== VENDAS ===== -->
      <section id="screen-vendas" class="screen">
        <div class="panel">
          <div class="panel-header">Registrar Venda</div>
          <div class="panel-body" edit-form>
            <div class="grid cols-3">
              <div class="field"><label>Data da Venda</label><input type="date" id="vnd-data"></div>

              <div class="field"><label>Produto</label><select id="vnd-prod"></select></div>
<div class="field"><label>Origem da Venda</label><select id="vnd-origem"></select></div>
              <div class="field"><label>Quantidade</label><input id="vnd-qtd" placeholder="Ex.: 2"></div>
              <div class="field"><label>Pre√ßo de Venda (unid)</label><input id="vnd-preco" placeholder="Ex.: 39,90"></div>
            </div>
            <div class="actions" >
              <button id="btn-vender" class="btn primary">Salvar Venda</button>
            </div>
            <div ><span class="tag" id="vnd-info">Markup: ‚Äî | Lucro: ‚Äî</span></div>
          </div>
        </div>
        <div class="panel">
          <div class="panel-header">Hist√≥rico de Vendas</div>
          <div class="panel-body" edit-form>
            <table><thead><tr><th>Data</th><th>Produto</th><th>Qtd</th><th>Pre√ßo</th><th>Custo Unit</th><th>Lucro</th><th>Markup</th></tr></thead><tbody id="tb-vendas"></tbody></table>
          </div>
        </div>
      </section>

      <!-- ===== CONFIGURA√á√ïES ===== -->
      
      <!-- ===== REVENDEDORES ===== -->
      <section id="screen-revendedores" class="screen">
        <div class="panel">
          <div class="panel-header">Cadastro de Revendedores</div>
          <div class="panel-body" edit-form>
            <div class="grid cols-2">
              <div class="field"><label>Nome *</label><input id="rev-nome" placeholder="Ex.: Ana Silva"></div>
              <div class="field"><label>Contato</label><input id="rev-contato" placeholder="Telefone, e-mail..."></div>
            </div>
            <div class="actions" >
              <button id="btn-rev-salvar" class="btn primary">Salvar Revendedor</button>
              <button id="btn-rev-reset" class="btn ghost">Limpar</button>
            </div>
            <input type="hidden" id="rev-edit-id">
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">Lista de Revendedores</div>
          <div class="panel-body" edit-form>
            <table>
              <thead><tr><th>Nome</th><th>Contato</th><th>A√ß√µes</th></tr></thead>
              <tbody id="tb-revendedores"></tbody>
            </table>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">Enviar Produtos a Revendedores</div>
          <div class="panel-body" edit-form>
            <div class="grid cols-3">
              <div class="field"><label>Produto (do estoque principal)</label><select id="env-prod"></select></div>
              <div class="field"><label>Revendedor</label><select id="env-rev"></select></div>
              <div class="field"><label>Quantidade</label><input id="env-qtd" placeholder="Ex.: 5"></div>
              <div class="field"><label>Data</label><input type="date" id="env-data"></div>
              <div class="field"><label>&nbsp;</label><button id="btn-env" class="btn primary">Enviar</button></div>
            </div>
            <div >
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-header">Devolu√ß√£o de Produtos ao Estoque Principal</div>
          <div class="panel-body" edit-form>
            <div class="grid cols-3">
              <div class="field"><label>Revendedor</label><select id="dev-rev"></select></div>
              <div class="field"><label>Produto (do revendedor)</label><select id="dev-prod"></select></div>
              <div class="field"><label>Quantidade</label><input id="dev-qtd" placeholder="Ex.: 3"></div>
              <div class="field"><label>Data</label><input type="date" id="dev-data"></div>
              <div class="field"><label>&nbsp;</label><button id="btn-dev" class="btn">Devolver</button></div>
            </div>
            <div >
            </div>
          </div>
        </div>

        </section>
    

      <section id="screen-config" class="screen">
        <div class="panel">
          <div class="panel-header">Configura√ß√µes</div>
          <div class="panel-body" edit-form>
            <div class="cfg-grid">
<button class="btn" id="btn-export">üíæ Exportar Backup (JSON)</button>
<label class="btn ghost" for="inp-import">üì• Importar Backup (JSON)</label>
<input id="inp-import" type="file" accept=".json" >
          

</div></div></div>
<div class="panel">
  <div class="panel-header">Limpeza de Hist√≥ricos</div>
  <div class="panel-body" edit-form>
    <div class="cfg-grid">
      <button id="btn-clear-hist" class="btn danger">üóëÔ∏è Apagar Hist√≥rico de Compras</button>
      <button id="btn-clear-prod" class="btn danger">üóëÔ∏è Apagar Hist√≥rico de Produ√ß√£o</button>
      <button id="btn-clear-vnd" class="btn danger">üóëÔ∏è Apagar Hist√≥rico de Vendas</button>
    </div>
  </div>
</div>
<div class="panel">
  <div class="panel-header">Reset do Sistema</div>
  <div class="panel-body" edit-form>
    <div class="cfg-grid">
      <button id="btn-reset" class="btn danger">‚ö†Ô∏è Resetar Sistema</button>
    </div>
  </div>
</div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="toast" class="toast"></div>

<!-- Chart.js embed (CDN) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<footer >
  ¬© 2025 Chama do C√©u - Todos os direitos reservados.
</footer>
	
<!-- Firebase e prote√ß√£o -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="auth-guard.js"></script>

  <!-- App principal -->
  <script src="app.js"></script>
</body>
</html>
